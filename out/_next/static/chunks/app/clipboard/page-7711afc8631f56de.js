(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{2807:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(5155),r=o(2115),i=o(4752),l=o.n(i),a=o(4625),d=o.n(a),c=o(4298);function s(){let[e,t]=(0,r.useState)(!1),[o,i]=(0,r.useState)(""),[a,s]=(0,r.useState)([]),[u,x]=(0,r.useState)("text"),[f,h]=(0,r.useState)(null),[b,y]=(0,r.useState)(0),[g,m]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!0),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return;let t=JSON.parse(atob(e.split(".")[1]))._id;return j.current=(0,c.Ay)("http://192.168.1.12:4000",{query:{userId:t}}),j.current.emit("join",t),j.current.on("notification",e=>{l().fire({icon:"success",title:"Clipboard Saved!",text:"\uD83D\uDCE2 New clipboard received:",confirmButtonColor:"#0070f3"})}),v(),()=>{var e;null==(e=j.current)||e.disconnect()}},[]),(0,r.useEffect)(()=>(window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)),[g,w]);let v=async()=>{if(g||!w)return;m(!0);let e=localStorage.getItem("token"),t=await fetch("/api/clipboard?skip=".concat(5*b,"&limit=").concat(5),{headers:{Authorization:"Bearer ".concat(e)}}),o=await t.json();Array.isArray(o.data)&&(s(e=>[...e,...o.data]),C((b+1)*5<o.total),y(e=>e+1)),m(!1)},S=async()=>{let e,n,r=localStorage.getItem("token");if("text"===u)e=await fetch("/api/clipboard",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({content:o,type:"text"})});else{let t=new FormData;t.append("file",f),t.append("type","file"),e=await fetch("/api/clipboard",{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:t})}n=await e.json(),e.ok?(l().fire({icon:"success",title:"Clipboard Saved!",text:"The clipboard has been added successfully.",confirmButtonColor:"#0070f3"}),i(""),h(null),x("text"),t(!1),s(e=>[n.data,...e]),y(0)):l().fire({icon:"error",title:"Error!",text:n.message||"Something went wrong.",confirmButtonColor:"#d33"})},k=e=>{let t=document.createElement("button");t.setAttribute("data-clipboard-text",e),document.body.appendChild(t);let o=new(d())(t);o.on("success",()=>{l().fire({icon:"success",title:"Copied to Clipboard!",text:"The content has been copied successfully.",confirmButtonColor:"#28a745"}),o.destroy(),document.body.removeChild(t)}),o.on("error",()=>{l().fire({icon:"info",title:"Copy Manually",html:'<p>Unable to copy automatically. Please copy the text below:</p><textarea style="width: 100%; height: 80px;">'.concat(e,"</textarea>"),confirmButtonColor:"#0070f3"}),o.destroy(),document.body.removeChild(t)}),t.click()},B=async e=>{let t=localStorage.getItem("token"),o=await fetch("/api/clipboard",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({_id:e})}),n=await o.json();o.ok?(l().fire({icon:"success",title:"Clipboard Deleted!",text:"The clipboard has been deleted successfully.",confirmButtonColor:"#d33"}),s(t=>t.filter(t=>t._id!==e))):l().fire({icon:"error",title:"Error!",text:n.message||"Something went wrong.",confirmButtonColor:"#d33"})},D=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&!g&&w&&v()};return(0,n.jsxs)("div",{onScroll:D,style:p.container,children:[(0,n.jsx)("h2",{style:p.title,children:"My Clipboard"}),e?(0,n.jsxs)("div",{style:p.form,children:[(0,n.jsxs)("select",{value:u,onChange:e=>x(e.target.value),style:p.select,children:[(0,n.jsx)("option",{value:"text",children:"Text"}),(0,n.jsx)("option",{value:"file",children:"File"})]}),"text"===u?(0,n.jsx)("textarea",{style:p.textarea,placeholder:"Write your clipboard content here...",value:o,onChange:e=>i(e.target.value)}):(0,n.jsx)("input",{type:"file",onChange:e=>h(e.target.files[0]),style:p.inputFile}),(0,n.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,n.jsx)("button",{style:p.saveButton,onClick:S,children:"Save"}),(0,n.jsx)("button",{style:p.cancelButton,onClick:()=>t(!1),children:"Cancel"})]})]}):(0,n.jsx)("button",{style:p.addButton,onClick:()=>t(!0),children:"+ Add Clipboard"}),(0,n.jsx)("div",{style:p.clipList,children:0===a.length?(0,n.jsx)("p",{style:{marginTop:"20px"},children:"No clipboards found."}):a.map((e,t)=>{if(!e)return null;let o=/\.(jpg|jpeg|png|gif|webp)$/i.test(e.content||""),r=e.content;return(0,n.jsxs)("div",{style:p.card,children:["file"===e.type?o?(0,n.jsx)("img",{src:r,alt:"Clipboard Image",style:{width:"100%",borderRadius:"6px"}}):(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,n.jsx)("span",{children:"\uD83D\uDCC4"}),(0,n.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:"Download File"})]}):(0,n.jsx)("p",{style:{color:"black"},children:e.content}),(0,n.jsx)("small",{style:{color:"#555"},children:new Date(e.createdAt).toLocaleString()}),(0,n.jsxs)("div",{style:p.buttons,children:["text"===e.type?(0,n.jsx)("button",{style:p.copyButton,onClick:()=>k(e.content),children:"Copy"}):(0,n.jsx)("a",{href:r,download:!0,style:{...p.copyButton,textDecoration:"none",textAlign:"center"},children:"Download"}),(0,n.jsx)("button",{style:p.deleteButton,onClick:()=>B(e._id),children:"Delete"})]})]},t)})})]})}let p={container:{padding:"40px",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto"},title:{fontSize:"26px",marginBottom:"20px"},addButton:{padding:"10px 20px",fontSize:"16px",backgroundColor:"#0070f3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginBottom:"20px"},form:{display:"flex",flexDirection:"column",gap:"10px",width:"400px",marginBottom:"20px"},textarea:{width:"100%",height:"120px",padding:"10px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"6px"},inputFile:{padding:"10px",fontSize:"16px"},select:{padding:"8px",fontSize:"16px",borderRadius:"6px",border:"1px solid #ccc"},saveButton:{flex:1,padding:"10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},cancelButton:{flex:1,padding:"10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},clipList:{display:"flex",flexDirection:"column",gap:"15px",width:"400px"},card:{padding:"15px",backgroundColor:"#f9f9f9",borderRadius:"6px",border:"1px solid #ddd",wordBreak:"break-word",display:"flex",flexDirection:"column",gap:"10px"},buttons:{display:"flex",justifyContent:"space-between",gap:"10px"},copyButton:{padding:"6px 12px",backgroundColor:"#0070f3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},deleteButton:{padding:"6px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"}}},7402:(e,t,o)=>{Promise.resolve().then(o.bind(o,2807))}},e=>{var t=t=>e(e.s=t);e.O(0,[320,426,441,684,358],()=>t(7402)),_N_E=e.O()}]);